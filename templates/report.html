{% extends "base.html" %}
{% block content %}
<h2>Inventory Report</h2>

<table class="table table-bordered">
  <thead class="table-dark">
    <tr><th>Product</th><th>Location</th><th>Balance Qty</th></tr>
  </thead>
  <tbody>
    {% for (product, location), qty in report.items() %}
    <tr>
      <td>{{ product }}</td>
      <td>{{ location }}</td>
      <td>{{ qty }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if totals %}
<h4>Product Totals</h4>
<table class="table table-bordered">
  <thead class="table-dark">
    <tr><th>Product</th><th>Total Quantity</th></tr>
  </thead>
  <tbody>
    {% for product, qty in totals.items() %}
    <tr>
      <td>{{ product }}</td>
      <td>{{ qty }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

<h4>Movement History</h4>
<table class="table table-bordered">
  <thead class="table-secondary">
    <tr><th>ID</th><th>Product</th><th>From</th><th>To</th><th>Qty</th><th>Timestamp</th></tr>
  </thead>
  <tbody>
    {% for m in movements %}
    <tr>
      <td>{{ m.movement_id }}</td>
      <td>{{ m.product_id }}</td>
      <td>{{ m.from_location or '-' }}</td>
      <td>{{ m.to_location or '-' }}</td>
      <td>{{ m.qty }}</td>
      <td>{{ m.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
